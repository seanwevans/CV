\documentclass[a4paper]{article}

\usepackage{fontspec}
\defaultfontfeatures{Ligatures=TeX}
\usepackage[margin=0.75in]{geometry}
\usepackage{xcolor}
\usepackage{titlesec}
\usepackage{enumitem}
\usepackage{multicol}
\usepackage{hyperref}
\usepackage{fontawesome}
\usepackage{array}

\hypersetup{
    colorlinks=true,
    urlcolor=blue,
    linkcolor=black
}

\titleformat{\section}{\scshape \Large}{}{0em}{}[\titlerule]
\pagestyle{empty}

\newcommand{\TwoRowSubheading}[4]{
  \item \begin{tabular*}{.95\textwidth}{@{}l @{\extracolsep{\fill}} r@{}}
    \textbf{#1} & \textbf{#2} \\
    {\color{gray}#3} & {\itshape #4} \\
  \end{tabular*}
}

% Load CV data and run exporters
\directlua{dofile("cv.lua")}

\begin{document}

% HEADER
\begin{tabular*}{\textwidth}{@{}l @{\extracolsep{\fill}} r@{}}
 \Huge \textsc{\directlua{tex.print(cv.name)}} &
 \href{mailto:\directlua{tex.print(cv.email)}}{E-Mail} \ \faEnvelopeO \\
 \faPhone\ \href{tel:\directlua{tex.print(cv.phone)}}{\directlua{tex.print(cv.phone)}} &
 \href{\directlua{tex.print(cv.github)}}{Github} \ \faGithub \\
 \faHome\ \href{\directlua{tex.print(cv.website)}}{Website} &
 \href{\directlua{tex.print(cv.linkedin)}}{Linked In} \ \faLinkedinSquare
\end{tabular*}

% SUMMARY
\section{Summary}
\directlua{tex.print(cv.summary)}

% SKILLS
\section{Skills}
\begin{itemize}[leftmargin=*,label=]
\directlua{
  for _, s in ipairs(cv.skills) do
    tex.print("\\item \\textbf{" .. s.category .. ":} " .. table.concat(s.items, ", "))
  end
}
\end{itemize}

% EXPERIENCE
\section{Experience}
\begin{itemize}[leftmargin=*,label=]
\directlua{
  for _, e in ipairs(cv.experience) do
    tex.print("\\TwoRowSubheading{" .. e.company .. "}{" .. e.location .. "}{" .. e.title .. "}{" .. e.dates .. "}")
    tex.print("\\begin{itemize}[leftmargin=1em,rightmargin=1em]")
    for _, b in ipairs(e.bullets) do
      tex.print("\\item " .. b)
    end
    tex.print("\\end{itemize}")
  end
}
\end{itemize}

% EDUCATION
\section{Education}
\begin{itemize}[leftmargin=*]
\directlua{
  for _, ed in ipairs(cv.education) do
    tex.print("\\TwoRowSubheading{" .. ed.institution .. "}{}{" .. ed.degree .. "}{" .. ed.dates .. "}")
  end
}
\end{itemize}

\end{document}
